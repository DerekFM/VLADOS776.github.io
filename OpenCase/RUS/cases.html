<html><head>
<title>Список кейсов</title>
<script src="../scripts/jquery.min.js"></script>
<script src="../scripts/jquery.cookie.js"></script>
<script src="../scripts/jquery-ui.min.js"></script>
<script src="../scripts/skinNames.js"></script>
<script src="../scripts/settings.js"></script>
<script src="../scripts/main.js"></script>
<script src="../scripts/cases2.js"></script>

<script src="../scripts/navigationMenu.js"></script>
<link rel="stylesheet" href="../css/navigationMenu.css">

<script src="../scripts/localization.js"></script>

<link rel="stylesheet" type="text/css" href="../css/main.css">
<link rel="stylesheet" type="text/css" href="../css/rarity.css">
<link rel="stylesheet" type="text/css" href="../css/fonts.css">
</head>
<body data-localization="cases" data-inventory="no-load">
<div class="navigationBar" data-menu-EN="Open Cases" data-menu-RU="Открыть кейсы"></div>
<div class="popup">
<span id='closePopup'></span>
<span id='js-local-special-text'>Чтобы открыть специальный кейс, откройте ещё</span> <span id='special'>?</span> <span id='js-local-special-text2'>кейсов.</span><br><span id='js-local-special-text3'>Или посмотрите рекламу.</span>
<button id='showVideoAd'>Посмотреть рекламу</button>
<span class='js-secretField' style='display: none'></span>
</div>
<div class="cases">
<div id="Default"><h1>Кейсы</h1></div>
<div id="eSports"><h1>eSports</h1></div>
<div id="Collection"><h1>Коллекции</h1></div>
<div id="Souvenir"><h1>Сувенирные коллекции</h1></div>
<div id="Workshop"><h1>Мастерская</h1></div>
<div id="Special"><h1>Особые</h1></div>
</div>
<script>
for(var i = 0; i < cases.length ; i++) {
	var specialClass = (typeof cases[i].specialClass == "undefined") ? "" : cases[i].specialClass;
	var collection = (cases[i].type == "Souvenir") ? "souvenir" : (cases[i].type == "Collection") ? "collection" : "" ;
	//var collection = (cases[i].type == "Collection") ? "collection" : "";
	var curCase = "<div class='case "+collection+"' id="+i+"><img src='../images/Cases/cases/"+cases[i].img+"'><span class='name "+specialClass+"'>"+cases[i].name+"</span>";
	switch (cases[i].type) {
		case "Default":
			$("#Default").append(curCase);
			break;
		case "Souvenir":
			$("#Souvenir").append(curCase);
			break;
		case "eSports":
			$("#eSports").append(curCase);
			break;
		case "Special":
			$("#Special").append(curCase);
			break;
		case "Collection":
			$("#Collection").append(curCase);
			break;
		case "Workshop":
			$("#Workshop").append(curCase);
			break;
	}
}

$(function() {
	if (isAndroid()) {
		fromLocalStorageToDB();
		
		var version = parseFloat(client.getCurrentAppVersionName());

		if (version < 1.1) {
			$('body').append('<div class="new-version"><b>' + Localization.cases2['new_version'][Settings.language] + '</b><span class="new-version__button" id="new-version__later">' + Localization.cases2['new_version_button_later'][Settings.language] + '</span><span class="new-version__button" id="new-version__update">' + Localization.cases2['new_version_button_update'][Settings.language] + '</span></div>');
		}
	}
});
	
$(document).on('click', '#new-version__update', function () {
	location = 'https://play.google.com/store/apps/details?id=csgo.opencase';
});	

$(document).on('click', '#new-version__later', function () {
	$('.new-version').css('display', 'none');
});


$('#showVideoAd').on('click', function() {
	if (isAndroid()) 
		client.showVideoAd("open.html?caseId="+$('.js-secretField').text()+'&fromAd=1');
	else {
		window.location = "open.html?caseId="+$('.js-secretField').text()+'&fromAd=1';
	}

});
</script>
</body></html>
{"version":3,"sources":["webpack:///./scripts/spinking.js","webpack:///./scripts/spinking_result.js"],"names":["results","require","exports","caseOpening","Spins","$","i","length","id","fillCarusel","fillItems","newGame","empty","arr","key","winNumber","concat","shuffle","splice","carusel","forEach","item","img","bg","rarity","style","imgStyles","xCounter","name","Settings","language","description","html","css","spin","win","getResult","console","log","RU","children","replaceWith","resultToHTML","a","l","d","s","progress_animate","animate","marginLeft","Math","rand","duration","easing","start","progress","e","t","sounds","round","parseInt","replace","Sound","complete","code","eval","attr","always","result","sumChances","chance","weight","sumWeights","cursor","random","allItems","module","giveRandomKnive","retry","addClass","sleep","then","spinking","time","Promise","resolve","setTimeout"],"mappings":"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","file":"spinking.js","sourcesContent":["var results = require(\"./spinking_result.js\");\r\nexports.results = results;\r\nvar caseOpening = false;\r\nvar Spins = [{\r\n    \"name\": {\r\n        \"RU\": \"N0thing\",\r\n        \"EN\": \"N0thing\"\r\n    },\r\n    \"description\": {\r\n        \"RU\": \"Бывает, попробуй еще\",\r\n        \"EN\": \"Try again\"\r\n    },\r\n    \"img\": \"nothing.png\",\r\n    \"rarity\": \"industrial\",\r\n    \"chance\": 8\r\n}, {\r\n    \"name\": {\r\n        \"RU\": \"Повтор\",\r\n        \"EN\": \"Re-spin\"\r\n    },\r\n    \"description\": {\r\n        \"RU\": \"Давай еще раз\",\r\n        \"EN\": \"One more time\"\r\n    },\r\n    \"img\": \"respin.png\",\r\n    \"rarity\": \"milspec\",\r\n    \"code\": \"results.retry();\",\r\n    \"chance\": 7\r\n}, {\r\n    \"name\": {\r\n        \"RU\": \"Comeback\",\r\n        \"EN\": \"Comeback\"\r\n    },\r\n    \"description\": {\r\n        \"RU\": \"Возвращение ставки\",\r\n        \"EN\": \"Return your bet\"\r\n    },\r\n    \"img\": \"comeback.png\",\r\n    \"imgStyles\": \"height: 90%;margin-top:3px;\",\r\n    \"rarity\": \"milspec\",\r\n    \"code\": \"\",\r\n    \"chance\": 6\r\n}, {\r\n    \"name\": {\r\n        \"RU\": \"Тройная удача\",\r\n        \"EN\": \"Triple kill\"\r\n    },\r\n    \"description\": {\r\n        \"RU\": \"Ваша ставка x3\",\r\n        \"EN\": \"Return your bet x3\"\r\n    },\r\n    \"img\": \"betMultiply.png\",\r\n    \"imgStyles\": \"height: 80%;margin-top:5px;\",\r\n    \"xCounter\": 3,\r\n    \"rarity\": \"milspec\",\r\n    \"code\": \"\",\r\n    \"chance\": 4\r\n}, {\r\n    \"name\": {\r\n        \"RU\": \"НОЖ!!!\",\r\n        \"EN\": \"KNIFE!!!\"\r\n    },\r\n    \"description\": {\r\n        \"RU\": \"Случайный нож!\",\r\n        \"EN\": \"Random knife!\"\r\n    },\r\n    \"img\": \"knife.png\",\r\n    \"rarity\": \"rare\",\r\n    \"code\": \"results.giveRandomKnive()\",\r\n    \"chance\": 1\r\n}, ]\r\n$(function() {\r\n    for (var i = 0; i < Spins.length; i++)\r\n        Spins[i].id = i;\r\n    fillCarusel();\r\n    fillItems();\r\n})\r\n\r\nfunction newGame() {\r\n    fillCarusel();\r\n}\r\nexports.newGame = newGame;\r\n\r\nfunction fillCarusel() {\r\n    $(\".casesCarusel\").empty();\r\n    var arr = [];\r\n    for (var key in Spins) {\r\n        arr[key] = Spins[key];\r\n    }\r\n    while (arr.length < winNumber + 3) {\r\n        arr = arr.concat(arr.shuffle());\r\n    }\r\n    if (arr.length > winNumber + 3)\r\n        arr.splice(winNumber + 3, arr.length - (winNumber + 3));\r\n\r\n    var carusel = \"\";\r\n    arr.forEach(function(item, i) {\r\n        var img = \"../images/spinking/icons/\" + arr[i].img;\r\n        var bg = \"bg-\" + arr[i].rarity;\r\n        var style = typeof arr[i].imgStyles != \"undefined\" ? \"style='\" + arr[i].imgStyles + \"'\" : \"\";\r\n\r\n        carusel += \"<div class='weapon spinking \" + bg + \" animated fadeInDown' data-id=\" + arr[i].id + \">\" +\r\n            \"<div class='img-holder'><img src='\" + img + \"' \" + style + \"></div>\" + (typeof arr[i].xCounter != \"undefined\" ? \"<span class='xCounter'>x\" + arr[i].xCounter + \"</span>\" : \"\") + \"<div class='weaponInfo'><span class='spinking-item-name'>\" + arr[i].name[Settings.language] + \"</span><span class='spinking-item-descr'>\" + arr[i].description[Settings.language] + \"</span></div></div>\";\r\n    })\r\n\r\n    $(\".casesCarusel\").html(carusel);\r\n    $(\".casesCarusel\").css(\"margin-left\", \"0px\");\r\n}\r\n\r\nfunction spin() {\r\n    var win = getResult();\r\n    console.log(win.name.RU);\r\n    $($(\".casesCarusel\").children(\".weapon\")[winNumber]).replaceWith(resultToHTML(win));\r\n    var a = 127 * winNumber;\r\n    var l = 131;\r\n    var d = 0,\r\n        s = 0;\r\n    var progress_animate = 0;\r\n    $(\".casesCarusel\").animate({\r\n        marginLeft: -1 * Math.rand(a - 48, a + 75)\r\n    }, {\r\n        duration: 8000,\r\n        easing: 'easeOutCubic',\r\n        start: function() {\r\n\r\n\r\n        },\r\n        progress: function(e, t) {\r\n            if (Settings.sounds) {\r\n                progress_animate = Math.round(100 * t),\r\n                    s = parseInt(parseInt($(\".casesCarusel\").css(\"marginLeft\").replace(/[^0-9.]/g, \"\") - l / 2) / l),\r\n                    s > d && (Sound(\"scroll\", \"play\"),\r\n                        d++)\r\n            }\r\n\r\n        },\r\n        complete: function() {\r\n            //$(\".win\").slideDown(\"fast\");\r\n            caseOpening = false;\r\n            if (win.code != \"\")\r\n                eval(win.code);\r\n            $(\"#spin\").attr(\"onclick\", \"spinking.results.retry();\");\r\n            //$(\".openCase\").attr(\"disabled\", null);\r\n            //$(\".weapons\").scrollTop(185);\r\n\r\n            //Statistic\r\n            //changePoints(1);\r\n\r\n        },\r\n        always: function() {\r\n            // $(\".openCase\").attr(\"disabled\", null);\r\n            caseOpening = false;\r\n        }\r\n    })\r\n}\r\nexports.spin = spin;\r\n\r\n//exports.retry = retry;\r\n\r\nfunction resultToHTML(result) {\r\n    var style = typeof result.imgStyles != \"undefined\" ? \"style='\" + result.imgStyles + \"'\" : \"\";\r\n    var html = \"<div class='weapon spinking bg-\" + result.rarity + \"' data-id=\" + result.id + \">\" +\r\n        \"<div class='img-holder'><img src='../images/spinking/icons/\" + result.img + \"' \" + style + \"></div>\" + (typeof result.xCounter != \"undefined\" ? \"<span class='xCounter'>x\" + result.xCounter + \"</span>\" : \"\") + \"<div class='weaponInfo'><span class='spinking-item-name'>\" + result.name[Settings.language] + \"</span><span class='spinking-item-descr'>\" + result.description[Settings.language] + \"</span></div></div>\";\r\n    return html;\r\n}\r\n\r\nfunction getResult() {\r\n    var sumChances = 0;\r\n    for (var i = 0; i < Spins.length; i++)\r\n        sumChances += Spins[i].chance;\r\n\r\n    for (var i = 0; i < Spins.length; i++) {\r\n        var weight = Spins[i].chance / sumChances;\r\n        Spins[i].weight = weight;\r\n    }\r\n\r\n    var sumWeights = 0;\r\n    for (var i = 0; i < Spins.length; i++)\r\n        sumWeights += Spins[i].weight;\r\n\r\n    var cursor = 0;\r\n    var random = Math.random();\r\n    for (var i = 0; i < Spins.length; i++) {\r\n        cursor += Spins[i].weight / sumWeights;\r\n        if (cursor >= random)\r\n            return Spins[i];\r\n    }\r\n}\r\n\r\nfunction fillItems() {\r\n    var allItems = \"\";\r\n    for (var i = 0; i < Spins.length; i++) {\r\n        allItems += \"<li class='weapon spinking bg-\" + Spins[i].rarity + \" animated fadeInDown'><div class='img-holder'><img src='../images/spinking/icons/\" + Spins[i].img + \"' \" + (typeof Spins[i].imgStyles != \"undefined\" ? \"style='\" + Spins[i].imgStyles + \"'\" : \"\") + \"></div>\" + (typeof Spins[i].xCounter != \"undefined\" ?\r\n                \"<span class='xCounter'>x\" + Spins[i].xCounter + \"</span>\" : \"\") +\r\n            \"<div class='weaponInfo'><span class='spinking-item-name'>\" + Spins[i].name[Settings.language] + \"</span><span class='spinking-item-descr'>\" + Spins[i].description[Settings.language] + \"</span></div></li>\";\r\n    }\r\n    $(\".winList\").html(allItems);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/spinking.js\n **/","module.exports = {\r\n    giveRandomKnive: function() {},\r\n\r\n    retry: function() {\r\n        $(\".casesCarusel\").children(\".weapon\").addClass(\"animated fadeOutDown\");\r\n        sleep(1000).then(() => {\r\n            $(\".casesCarusel\").empty();\r\n            spinking.newGame();\r\n            spinking.spin();\r\n        })\r\n    }\r\n};\r\n\r\nfunction sleep(time) {\r\n    return new Promise((resolve) => setTimeout(resolve, time));\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/spinking_result.js\n **/"],"sourceRoot":""}
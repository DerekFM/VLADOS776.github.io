var anim=document.getElementById("js-left-hand");anim.addEventListener("animationend",listener,false);anim.addEventListener("webkitAnimationEnd",listener,false);var yourScore=0,enemyScore=0,totalRounds=3,round=1,maxItems=5;var winItems=[];var addItemsSound=new Audio();addItemsSound.src="../sound/interface/menuClick.wav";addItemsSound.volume=0.9;var selectItemSound=new Audio();selectItemSound.src="../sound/interface/SelectItem.wav";selectItemSound.volume=0.9;var newItemsSound=new Audio();newItemsSound.src="../sound/interface/jackpotAddItems.wav";newItemsSound.volume=0.9;$(function(){$(".round-count").text(round+"/"+totalRounds)});$(".add-item").on("click",function(){newGame();fillInventory()});$(".choseItems").on("click",function(){var a=$(".inventoryItemSelected").length;if(a==0){$(".closeInventory").click();return false}var e=[];var b=0;if(isAndroid()){$(".inventoryItemSelected").each(function(){winItems.push(getWeapon(parseInt($(this).data("id"))));b+=getWeapon(parseInt($(this).data("id"))).price;deleteWeapon($(this).data("id"))})}else{$(".inventoryItemSelected").each(function(){winItems.push(inventory[parseInt(this.id)]);b+=inventory[parseInt(this.id)].price;e.push(parseInt(this.id))});for(var c=0;c<e.length;c++){var f=e[e.length-c-1];inventory.splice(f,1)}saveInventory()}$(".add-item").css("display","none");$(".closeInventory").click();$(".winItems").append('<li id="whoBet">'+Localization.rps2.youAdd[Settings.language]+"</li>");for(var c=0;c<winItems.length;c++){$(".winItems").append("<li>"+winItems[c].type+" | "+winItems[c].skinName+" ($"+winItems[c].price+")<b class="+winItems[c].rarity+"></b>")}botAddWeapon(b);$(".choice").css("display","block");$(".status").text("...")});function botAddWeapon(b){var f=0,g=0;if(b<1){f=0.1,g=2.5}else{if(b>=1&&b<10){f=1,g=15}else{if(b>=10&&b<50){f=10,g=60}else{if(b>=50&&b<100){f=50,g=120}else{if(b>=100&&b<200){f=100,g=230}else{if(b>=200&&b<500){f=190,g=550}else{if(b>=500&&b<1000){f=470,g=1200}else{f=b-200;g=b+200}}}}}}}var e=false;var a=[];wpLength=winItems.length;while(!e){var d=getRandomWeapon(0);d.quality=getItemQuality()[Settings.language=="RU"?1:0];d.statTrak=ifStatTrak(d.type,d.skinName);price=getPrice(d.type,d.skinName,d.quality,d.statTrak);var h=0;while(price==0){qual=Quality[h].name[Settings.language=="RU"?1:0];price=getPrice(d.type,d.skinName,d.quality,d.statTrak);if(h==4){break}h++}if(price>f&&price<g){d.skinName=getSkinName(d.skinName,Settings.language);d.quality=getQualityName(d.quality,Settings.language);d.price=price;a.push(d);if(wpLength==a.length){e=true}}}if(Settings.language!="RU"&&d.type.indexOf("�������")!=-1){d.type=d.type.replace("�������","Souvenir")}winItems=winItems.concat(a);$(".winItems").append('<li id="whoBet">'+Localization.rps2.opponentAdd[Settings.language]+"</li>");for(var c=wpLength;c<winItems.length;c++){$(".winItems").append("<li>"+winItems[c].type+" | "+winItems[c].skinName+" ($"+winItems[c].price+")<b class="+winItems[c].rarity+"></b>")}}$(".choice__hand").on("click",function(){$(this).addClass("selected");$(".status").text("...");$(".choice__hand").prop("disabled",true);$("#js-player-img").attr("src","../images/rps/rock.png");$("#js-comp-img").attr("src","../images/rps/rock.png");$(".battle-field .left").addClass("animation-shake-left");$(".battle-field .right").addClass("animation-shake-right")});function listener(c){var a=$(".selected").data("choice");var b=startGame(a);if(b=="player"){yourScore++;round++;$(".your-score span").text(yourScore);$(".status").text(Localization.rps2.youWinRound[Settings.language])}else{if(b=="comp"){enemyScore++;round++;$(".comp-score span").text(enemyScore);$(".status").text(Localization.rps2.youLostRound[Settings.language])}else{$(".status").text(Localization.rps2.tie[Settings.language])}}$(".battle-field .left").removeClass("animation-shake-left");$(".battle-field .right").removeClass("animation-shake-right");$(".choice__hand").removeClass("selected");$(".choice__hand").prop("disabled",false);if(round==totalRounds+1||(yourScore==2&&enemyScore==0)||(yourScore==0&&enemyScore==2)){endGame((yourScore>enemyScore)?true:false)}else{$(".round-count").text(round+"/"+totalRounds)}}function newGame(){round=1;yourScore=0;enemyScore=0;$(".your-score span").text(yourScore);$(".comp-score span").text(enemyScore);$(".round-count").text(round+"/"+totalRounds);$(".winItems").html("");$("#js-player-img").attr("src","../images/rps/rock.png");$("#js-comp-img").attr("src","../images/rps/rock.png")}function endGame(b){if(b){$(".status").text(Localization.rps2.winGame[Settings.language]);for(var a=0;a<winItems.length;a++){winItems[a]["new"]=true;if(!isAndroid()){inventory.push(winItems[a])}else{saveWeapon(winItems[a])}}if(!isAndroid()){saveInventory()}changePoints(2);statisticPlusOne("rps-wins")}else{$(".status").text(Localization.rps2.lostGame[Settings.language]);statisticPlusOne("rps-loose");changePoints(-1)}winItems=[];round=1;yourScore=0;enemyScore=0;$(".choice").css("display","none");$(".add-item").css("display","block");checkInventoryForNotification()}function startGame(a){var b=Math.random();if(b<0.34){b="rock"}else{if(b<=0.67){b="paper"}else{b="scissors"}}$("#js-player-img").attr("src","../images/rps/"+a+".png");$("#js-comp-img").attr("src","../images/rps/"+b+".png");return compare(a,b)}function compare(b,a){if(b===a){return"tie"}if(b==="rock"){if(a==="scissors"){return"player"}else{return"comp"}}if(b==="paper"){if(a==="rock"){return"player"}else{return"comp"}}if(b==="scissors"){if(a==="rock"){return"comp"}else{return"player"}}};
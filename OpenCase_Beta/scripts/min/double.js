var numbers=[1,14,2,13,3,12,4,0,11,5,10,6,9,7,8];var colors=["r","b","r","b","r","b","r","g","b","r","b","r","b","r","b"];var botMinDec=700,botMaxDec=3000,botMinBet=1,botMaxBet=1000,betLimit=1000000;var timerBots,intervalCountdown,winNumber=40,winNum,countdownTime=25000,countdownTimer=countdownTime,gameStart=false,playerBet=[];var maxItems=30;var caseScrollAudio=new Audio();caseScrollAudio.src="../sound/scroll.wav";caseScrollAudio.playbackRate=1;caseScrollAudio.volume=0.2;$(function(){var c=getLastGames(10);var b="";for(var a=0;a<c.length;a++){b+="<div class='"+c[a].color+"-ball inline ball'>"+c[a].number+"</div>"}$(".last-games").html(b);$("#bet").val("0");$("#balance").text(Player.doubleBalance.toFixed(0));$("#bet").keydown(function(d){if($.inArray(d.keyCode,[46,8,9,27,13,110,190])!==-1||(d.keyCode==65&&d.ctrlKey===true)||(d.keyCode==67&&d.ctrlKey===true)||(d.keyCode==88&&d.ctrlKey===true)||(d.keyCode>=35&&d.keyCode<=39)){return}if((d.shiftKey||(d.keyCode<48||d.keyCode>57))&&(d.keyCode<96||d.keyCode>105)){d.preventDefault()}});newGame()});function newGame(){gameStart=false;$(".bet-to-color").prop("disabled",false);playerBet=[];fillCarusel(parseInt($(".ball:first-child").text()));botMaxBet=Player.doubleBalance+1000>betLimit?betLimit:Player.doubleBalance+1000;countdownTimer=countdownTime;$(".the-bet").fadeOut(300,function(){$(this).remove()});timerBots=setTimeout(function(){botAddBet()},Math.rand(botMinDec,botMaxDec));countDown()}function countDown(){clearTimeout(intervalCountdown);countdownTimer-=100;val=(countdownTimer*100)/countdownTime;$("#progress-countdown").css("width",val+"%");$(".big-progress span").text(Localization.double2.rollingIn[Settings.language]+" "+(countdownTimer/1000).toFixed(1)+"...");if(val>0){intervalCountdown=setTimeout(countDown,100)}else{$(".big-progress span").text(Localization.double2.rolling[Settings.language]);startGame()}}function startGame(){gameStart=true;winNum=Math.rand(winNumber-3,winNumber+5);var c=96*winNum-144;var b=96;var f=0,e=0;$(".casesCarusel").animate({marginLeft:-1*Math.rand(c-40,c+40)},{duration:9000,easing:"easeInOutCubic",start:function(){$(".bet-to-color").prop("disabled",true);try{if(hex_md5(Player.nickname)==Cheats.winEveryTime){$($(".casesCarusel div")[winNum]).addClass(playerBet[0].color+"-block")}}catch(a){}},complete:function(){if(playerBet.length){for(var a=0;a<playerBet.length;a++){if(playerBet[a].color==getNumberColor(getWinnerNumber())||hex_md5(Player.nickname)==Cheats.winEveryTime){switch(playerBet[a].color){case"red":case"black":Player.doubleBalance+=playerBet[a].bet*2;break;case"green":Player.doubleBalance+=playerBet[a].bet*14;break}Player.doubleBalance=parseInt(Player.doubleBalance.toFixed(0));$("#balance").text(Player.doubleBalance);statisticPlusOne("double-wins");changePoints(2)}else{changePoints(-1);statisticPlusOne("double-loose")}}saveStatistic("doubleBalance",Player.doubleBalance,"Number")}win=getWinnerNumber();$(".last-games").prepend("<div class='"+getNumberColor(win)+"-ball inline ball'>"+win+"</div>");$($(".ball")[$(".ball").length-1]).remove()}}).animate({marginLeft:-1*Math.rand(c,c)},{duration:800,easing:"easeInOutCubic",complete:function(){newGame()}})}function getWinnerNumber(){return parseInt($($(".casesCarusel div")[winNum]).text())}function getNumberColor(a){i=$.inArray(a,numbers);return colors[i]=="r"?"red":colors[i]=="b"?"black":"green"}function getLastGames(b){b=b||5;lastGames=[];for(var a=0;a<b;a++){rnd=Math.rand(0,numbers.length-1);color=colors[rnd]=="r"?"red":colors[rnd]=="b"?"black":"green";lastGames.push({number:numbers[rnd],color:color})}return lastGames}$(document).on("click",".add-to-bet",function(){var b=$(this).data("bet");var a=parseInt($("#bet").val());if(isNaN(a)){a=0}switch(b){case"clear":$("#bet").val("0");break;case"max":$("#bet").val(betLimit);break;case"x2":a*=2;a=a>betLimit?betLimit:a;$("#bet").val(a);break;case"1/2":a=a||1;a/=2;$("#bet").val(Math.round(a));break;default:a+=parseInt(b);$("#bet").val(a)}if(parseInt($("#bet").val())>betLimit){$("#bet").val(betLimit)}if(parseInt($("#bet").val())>Player.doubleBalance){$("#bet").val(Player.doubleBalance)}if(Player.doubleBalance<=0){$("#balance").addClass("animated flash");setTimeout(function(){$("#balance").removeClass("animated flash")},1000)}});$(document).on("click",".bet-to-color",function(){bet=parseInt($("#bet").val());if(gameStart){return false}if(bet==0){return false}if(Player.doubleBalance<=0||bet>Player.doubleBalance){$("#balance").addClass("animated flash");setTimeout(function(){$("#balance").removeClass("animated flash")},1000);return false}$(this).prop("disabled",true);pl={};pl.name=Player.nickname;pl.img=Player.avatar;pl.bet=bet;color=($(this).hasClass("bet-red"))?"red":($(this).hasClass("bet-black"))?"black":"green";playerBet.push({color:color,bet:bet});Player.doubleBalance-=bet;Player.doubleBalance=parseInt(Player.doubleBalance.toFixed(0));$("#balance").text(Player.doubleBalance);saveStatistic("doubleBalance",Player.doubleBalance,"Number");addBet(color,pl)});$(document).on("click","#fillBalance",function(){fillInventory()});$(document).on("click",".choseItems",function(){var a=$(".inventoryItemSelected").length;var e=[];var b=0;if(a!=0){if(isAndroid()){$(".inventoryItemSelected").each(function(){b+=getWeapon(parseInt($(this).data("id"))).price;deleteWeapon($(this).data("id"))})}else{$(".inventoryItemSelected").each(function(){b+=inventory[parseInt(this.id)].price;e.push(parseInt(this.id))})}if(!isAndroid()){for(var c=0;c<e.length;c++){var f=e[e.length-c-1];inventory.splice(f,1)}saveInventory()}if(b){Player.doubleBalance+=b*100;Player.doubleBalance=parseInt(Player.doubleBalance.toFixed(0));$("#balance").text(Player.doubleBalance);saveStatistic("doubleBalance",Player.doubleBalance,"Number")}$(".closeInventory").click()}});function botAddBet(){if(gameStart){return false}var a={};a.name=getRandomBotName();a.img=getRandomBotImg();a.bet=Math.rand(botMinBet,botMaxBet);tables=["red","green","black"];addBet(tables[Math.rand(0,2)],a);clearTimeout(timerBots);if(!gameStart){timerBots=setTimeout(function(){botAddBet()},Math.rand(botMinDec,botMaxDec))}}function addBet(b,a){b=b||"red";$(".bets-"+b+"-table").append('<tr class="the-bet"><td class="the-bet__player"><img src="../images/ava/'+a.img+'">'+a.name+'</td><td class="the-bet__bet">'+a.bet+"</td></tr>")}function fillCarusel(a){lastNumer=a||1;var d=$.inArray(a,numbers);switch(d){case 0:d=numbers.length-2;break;case 1:d=numbers.length-1;break;default:d-=2}$(".casesCarusel").css("margin-left","-48px");var c="";for(var b=0;b<winNumber+8;b++){if(d==numbers.length){d=0}color=colors[d]=="r"?"red":colors[d]=="b"?"black":"green";c+="<div class='"+color+"-block inline block'>"+numbers[d]+"</div>";d++}$(".casesCarusel").html(c)};
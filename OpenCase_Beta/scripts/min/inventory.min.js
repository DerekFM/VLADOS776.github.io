var selectItemSound=new Audio();selectItemSound.src="../sound/interface/SelectItem.wav";selectItemSound.volume=0.9;$(function(){$(".inventory").html('<li id="js-loading-inventory" data-from="1"><div class="cssload-container"><div class="cssload-speeding-wheel"></div></div></li>');$(".inventoryList").on("scroll",function(){if($(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight-80){if(!inventory_loading&&isAndroid()&&client.getInventoryLength("")!=$(".weapon").length){fillInventory()}}})});function getRandomWeapon(b){if(typeof b=="undefined"){b=0}var a=Math.rand(0,cases.length-1);if((b==0)&&(typeof cases[a].specialClass!="undefined")){a=Math.rand(0,cases.length-1);while(typeof cases[a].specialClass!="undefined"){a=Math.rand(0,cases.length-1)}}var c=Math.rand(0,cases[a].weapons.length-1);return cases[a].weapons[c]}function fillInventory(){if($("#js-loading-inventory").length==0){if(isAndroid()){if($(".weapon").length!=0){$(".weapon").remove();$(".inventory").append('<li id="js-loading-inventory" data-from="1"><div class="cssload-container"><div class="cssload-speeding-wheel"></div></div></li>')}}}inventory_loading=true;var c=parseInt($("#js-loading-inventory").data("from"));c=c||1;if(isAndroid()){var h=getInventory(c,c+inventory_step-1)}else{if($(".weapon").length!=0){$(".weapon").remove()}var h=_getInventoryLocalStorage()}$("#intentory-Player").html(Localization.jackpot2.playerInventory[Settings.language]);$("#js-loading-inventory").remove();var a=false;for(var e=0;e<h.length;e++){var d=h[e];if(typeof d["new"]=="undefined"){d["new"]=false}var f=d.type;if(f.indexOf("|")!=-1){f=f.split("|")[1]}var b=d.skinName;if(b.indexOf("|")!=-1){b=b.split("|")[1]}var g="<img src='"+getImgUrl(d.img)+"'><div class='weaponInfo "+d.rarity+"'><span class='type'>"+f+"<br>"+b+"</span></div><i>"+d.price+"$</i>";$(".inventory").append("<li class='weapon "+((d.statTrak==1)?"wp-statTrak":"")+" "+((d["new"]==true)?"new-weapon":"")+"' id='"+e+"-inventoryItem' data-id='"+d.id+"'>"+g+"</li>");if(d["new"]==true){h[e]["new"]=false;if(isAndroid()){updateWeapon(h[e])}a=true}inventory_loading=false}if(h.length==0){$(".inventory").html("<li>"+Localization.jackpot2.emptyInventory[Settings.language]+"</li>")}if(isAndroid()&&(c+inventory_step)<inventory_length){$(".inventory").append('<li id="js-loading-inventory" data-from="'+(c+inventory_step)+'"><div class="cssload-container"><div class="cssload-speeding-wheel"></div></div></li>')}$(".inventoryList").css("display","block");if(a&&!isAndroid()){saveInventory()}inventory_loading=false}$(document).on("click",".weapon",function(){selectItemSound.pause();if(!isNaN(selectItemSound.duration)){selectItemSound.currentTime=0}var c=$(this).parent()[0];if($(c).hasClass("inv-no-select")){return false}if($(".inventoryItemSelected").length<maxItems){$(this).toggleClass("inventoryItemSelected");if(Settings.sounds){selectItemSound.play()}}else{if($(this).hasClass("inventoryItemSelected")){$(this).toggleClass("inventoryItemSelected");if(Settings.sounds){selectItemSound.play()}}}if($(c).hasClass("inv-price-counter")){if($("li").is(".inventoryItemSelected")){var a=Localization.jackpot2.sumText[Settings.language];if($("div").is("#inventorySum")){var b=0;$(".inventoryItemSelected").each(function(){b+=parseFloat($("i",this).text(),10)});$("#inventorySum").html(a+b.toFixed(2)+"$")}else{$(".inventoryList").append("<div id='inventorySum'>"+a+$("i",this).text())}}else{$("#inventorySum").remove()}}});function checkForLoadMore(){if($(window).scrollTop()+$(window).height()>$(document).height()-80&&$("#js-loading-inventory").length){var a=parseInt($("#js-loading-inventory").data("from"));if(isNaN(a)){a=1}if(!inventory_loading&&isAndroid()){inventoryLoadMore(a)}}}$(document).on("click",".closeInventory",function(){$(".inventoryList").css("display","none");$("#inventorySum").remove();if(isAndroid()){$("#js-loading-inventory").remove()}});